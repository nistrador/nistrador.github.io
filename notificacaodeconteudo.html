<html>

<head>
  
  
  <link rel="manifest" href="/manifest.json">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async='async'></script>
 
  <script>
	  function navegadorSuportaNotificacao() {
  if ("Notification" in window)
    return true;
  else
    return false;
}
    function leitorJaConfigurouNotificacoes() {
	if (navegadorSuportaNotificacao()) {
		if (Notification.permission !== "default")
			return true;
	}
	return false;
}
	  function inicializa()
	  {
		  var OneSignal = window.OneSignal || [];
      OneSignal.push(["init", confirma(), {
      appId: "b4d189a8-3ad8-497b-93ec-b50bfa590a8e",
      autoRegister: true, /* Set to true to automatically prompt visitors */
      welcomeNotification: {
        title: "Notificações O GLOBO",
        message: "Obrigado! Agora você será notificado sempre que houver notícias importantes para manter-se informado."
      },
      notifyButton: {
        enable: false /* Set to false to hide */
      }
      }]);
	  }
	  
	  function confirma() {
		  if (leitorJaConfigurouNotificacoes())
      console.log('vamo beber!');
		  else 
			  console.log('ainda não vamo beber!');
	  }
	  
  function subscrever() {
       inicializa();
   
    
    /*if (navigator.serviceWorker.ready) {
     // if (!("Notification" in window)) {
     //   alert("This browser does not support desktop notification");
     //}
      Notification.requestPermission().then(function(permission) {
        console.log(permission);
      });
    }*/
  }
    
   $(function(){
     setTimeout(function() { subscrever(); }, 2000);
     });
  </script>
</head>

<body>
<table width="100%" height="600">
<tr><td>
<h3><p align="center">Clique para permitir a ativação do serviço de notificação de conteúdo.</p></h3>
</td></tr>
</table>
</body>

</html>
